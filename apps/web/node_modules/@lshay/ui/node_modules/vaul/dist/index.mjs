"use client"
"use client";import*as g from"@radix-ui/react-dialog";import H from"react";function te(e){let t=H.useRef(e);return H.useEffect(()=>{t.current=e}),H.useMemo(()=>(...n)=>{var o;return(o=t.current)==null?void 0:o.call(t,...n)},[])}function Re({defaultProp:e,onChange:t}){let n=H.useState(e),[o]=n,a=H.useRef(o),u=te(t);return H.useEffect(()=>{a.current!==o&&(u(o),a.current=o)},[o,a,u]),n}function ne({prop:e,defaultProp:t,onChange:n=()=>{}}){let[o,a]=Re({defaultProp:t,onChange:n}),u=e!==void 0,l=u?e:o,E=te(n),S=H.useCallback(T=>{if(u){let m=typeof T=="function"?T(e):T;m!==e&&E(m)}else a(T)},[u,e,a,E]);return[l,S]}import oe from"react";var j=oe.createContext(void 0),A=()=>oe.useContext(j);import f,{useEffect as Ae}from"react";function k(e,{insertAt:t}={}){if(!e||typeof document=="undefined")return;let n=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",t==="top"&&n.firstChild?n.insertBefore(o,n.firstChild):n.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}k(`[vaul-drawer]{transform:translateY(var(--swipe-amount));touch-action:none;animation:show-dialog .5s cubic-bezier(.32,.72,0,1)}[vaul-drawer]:after{content:"";position:absolute;top:100%;background:inherit;background-color:inherit;left:0;right:0;height:200%}[vaul-drawer][data-state=closed]{animation:hide-dialog .5s cubic-bezier(.32,.72,0,1) forwards}[vaul-overlay]{animation:show-overlay .5s cubic-bezier(.32,.72,0,1)}[vaul-overlay][data-state=closed]{animation:hide-overlay .5s cubic-bezier(.32,.72,0,1) forwards}@keyframes show-dialog{0%{transform:translateY(100%)}to{transform:translateY(0)}}@keyframes hide-dialog{0%{transform:translateY(var(--hide-from, 0))}to{transform:translateY(var(--hide-to, 100%))}}@keyframes show-overlay{0%{opacity:0}to{opacity:1}}@keyframes hide-overlay{0%{opacity:var(--opacity-from, 1)}to{opacity:0}}@media (hover: hover) and (pointer: fine){[vaul-drawer]{user-select:none}}
`);import{useEffect as De,useLayoutEffect as Se}from"react";var Ce=typeof window!="undefined"?Se:De;function B(...e){return(...t)=>{for(let n of e)typeof n=="function"&&n(...t)}}function Me(){return q(/^Mac/)}function He(){return q(/^iPhone/)}function xe(){return q(/^iPad/)||Me()&&navigator.maxTouchPoints>1}function Le(){return He()||xe()}function q(e){return typeof window!="undefined"&&window.navigator!=null?e.test(window.navigator.platform):void 0}var z=typeof document!="undefined"&&window.visualViewport;function re(e){let t=window.getComputedStyle(e);return/(auto|scroll)/.test(t.overflow+t.overflowX+t.overflowY)}function ae(e){for(re(e)&&(e=e.parentElement);e&&!re(e);)e=e.parentElement;return e||document.scrollingElement||document.documentElement}var Pe=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]),Y=0,F;function se(e={}){let{isDisabled:t}=e;Ce(()=>{if(!t)return Y++,Y===1&&(Le()?F=Ne():F=Oe()),()=>{Y--,Y===0&&F()}},[t])}function Oe(){return B(O(document.documentElement,"paddingRight",`${window.innerWidth-document.documentElement.clientWidth}px`),O(document.documentElement,"overflow","hidden"))}function Ne(){let e,t=0,n=m=>{e=ae(m.target),!(e===document.documentElement&&e===document.body)&&(t=m.changedTouches[0].pageY)},o=m=>{if(!e||e===document.documentElement||e===document.body){m.preventDefault();return}let d=m.changedTouches[0].pageY,C=e.scrollTop,M=e.scrollHeight-e.clientHeight;M!==0&&((C<=0&&d>t||C>=M&&d<t)&&m.preventDefault(),t=d)},a=m=>{let d=m.target;V(d)&&d!==document.activeElement&&(m.preventDefault(),d.style.transform="translateY(-2000px)",d.focus(),requestAnimationFrame(()=>{d.style.transform=""}))},u=m=>{let d=m.target;V(d)&&(d.style.transform="translateY(-2000px)",requestAnimationFrame(()=>{d.style.transform="",z&&(z.height<window.innerHeight?requestAnimationFrame(()=>{ie(d)}):z.addEventListener("resize",()=>ie(d),{once:!0}))}))},l=()=>{window.scrollTo(0,0)},E=window.pageXOffset,S=window.pageYOffset,T=B(O(document.documentElement,"paddingRight",`${window.innerWidth-document.documentElement.clientWidth}px`),O(document.documentElement,"overflow","hidden"),O(document.body,"marginTop",`-${S}px`));window.scrollTo(0,0);let b=B(P(document,"touchstart",n,{passive:!1,capture:!0}),P(document,"touchmove",o,{passive:!1,capture:!0}),P(document,"touchend",a,{passive:!1,capture:!0}),P(document,"focus",u,!0),P(window,"scroll",l));return()=>{T(),b(),window.scrollTo(E,S)}}function O(e,t,n){let o=e.style[t];return e.style[t]=n,()=>{e.style[t]=o}}function P(e,t,n,o){return e.addEventListener(t,n,o),()=>{e.removeEventListener(t,n,o)}}function ie(e){let t=document.scrollingElement||document.documentElement;for(;e&&e!==t;){let n=ae(e);if(n!==document.documentElement&&n!==document.body&&n!==e){let o=n.getBoundingClientRect().top,a=e.getBoundingClientRect().top,u=n.getBoundingClientRect().bottom;a>u&&(n.scrollTop+=a-o)}e=n.parentElement}}function V(e){return e instanceof HTMLInputElement&&!Pe.has(e.type)||e instanceof HTMLTextAreaElement||e instanceof HTMLElement&&e.isContentEditable}import*as le from"react";function Ie(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function $e(...e){return t=>e.forEach(n=>Ie(n,t))}function _(...e){return le.useCallback($e(...e),e)}var Ye=.25,Ve=1e3,h={DURATION:.5,EASE:[.32,.72,0,1]},Ue=501,ce=8,ue=new Map;function We(e){let t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=window.visualViewport.height+40&&t.right<=window.visualViewport.width}function p(e,t,n=!1){if(!e||!(e instanceof HTMLElement)||!t)return;let o={};Object.entries(t).forEach(([a,u])=>{if(a.startsWith("--")){e.style.setProperty(a,u);return}o[a]=e.style[a],e.style[a]=u}),!n&&ue.set(e,o)}function K(e,t){if(!e||!(e instanceof HTMLElement))return;let n=ue.get(e);if(!n){e.style={};return}t?e.style[t]=n[t]:Object.entries(n).forEach(([o,a])=>{e.style[o]=a})}function de({open:e,defaultOpen:t,onOpenChange:n,children:o,shouldScaleBackground:a,onDrag:u,onRelease:l,closeThreshold:E=Ye,scrollLockTimeout:S=Ve,dismissible:T=!0}){let[b=!1,m]=ne({prop:e,defaultProp:t,onChange:n}),[d,C]=f.useState(!1),[M,U]=f.useState(!0),R=f.useRef(null),y=f.useRef(null),X=f.useRef(null),N=f.useRef(null),G=f.useRef(null),W=f.useRef(0),I=f.useRef(!1),c=f.useRef(null),J=f.useRef(0);se({isDisabled:!b||d||M});function $(){return(window.innerWidth-26)/window.innerWidth}function fe(r){T&&(!c.current.contains(r.target)||r.target.tagName==="BUTTON"||(C(!0),y.current=new Date,r.target.setPointerCapture(r.pointerId),W.current=r.clientY))}function Q(r,i){let s=r,v=new Date;if(window.getSelection().toString().length>0||N.current&&v.getTime()-N.current.getTime()<S)return!1;for(;s;){if(s.scrollHeight>s.clientHeight){if(s.role==="dialog"||s.getAttribute("vaul-drawer"))return!0;if(s.scrollTop>0)return N.current=new Date,!1;if(i&&s!==document.body)return N.current=new Date,!1}s=s.parentNode}return!0}function me(r){var i;if(d){let s=W.current-r.clientY,v=s>0;if(!Q(r.target,v))return;let w=((i=c.current)==null?void 0:i.getBoundingClientRect().height)||0;if(p(c.current,{transition:"none"}),p(R.current,{transition:"none"}),s>0){p(c.current,{"--swipe-amount":`${Math.max(s*-1,-40)}px`});return}let x=Math.abs(s),L=document.querySelector("[vaul-drawer-wrapper]"),D=x/w,he=1-D;if(u==null||u(r,D),p(R.current,{opacity:`${he}`},!0),L&&R.current&&a){let Ee=Math.min($()+D*(1-$()),1),be=8-D*8,ye=Math.max(0,14-D*14);p(L,{borderRadius:`${be}px`,transform:`scale(${Ee}) translateY(${ye}px)`,transition:"none"},!0)}p(c.current,{"--swipe-amount":`${x}px`})}}Ae(()=>{J.current=window.visualViewport.height;function r(){var s,v;if(!c.current)return;let i=document.activeElement;if(!We(i)&&V(i)||I.current){let w=window.visualViewport.height,x=J.current-w,L=((s=c.current)==null?void 0:s.getBoundingClientRect().height)||0,D=(v=c.current)==null?void 0:v.getBoundingClientRect().top;I.current=!I.current,L>w?c.current.style.height=`${w-D}px`:c.current.style.height="initial",c.current.style.bottom=`${x}px`}}return window.visualViewport.addEventListener("resize",r),()=>window.visualViewport.removeEventListener("resize",r)},[]);function Z(){var i,s;if(!T)return;m(!1);let r=((i=c.current)==null?void 0:i.getBoundingClientRect().height)||0;if(c.current){let v=getComputedStyle(c.current).getPropertyValue("--swipe-amount").slice(0,-2);p(c.current,{"--hide-from":`${Number(v).toFixed()}px`,"--hide-to":`${r.toFixed()}px`});let w=((s=R.current)==null?void 0:s.style.opacity)||1;p(R.current,{"--opacity-from":`${w}`})}}f.useEffect(()=>{if(!b&&a){let r=setTimeout(()=>{K(document.body)},200);return()=>clearTimeout(r)}},[b]);function ee(){let r=document.querySelector("[vaul-drawer-wrapper]"),i=Number(getComputedStyle(c.current).getPropertyValue("--swipe-amount").slice(0,-2));p(c.current,{"--swipe-amount":"0px",transition:"transform 500ms cubic-bezier(0.32, 0.72, 0, 1)"}),p(R.current,{transition:`opacity ${h.DURATION}s cubic-bezier(${h.EASE.join(",")})`,opacity:"1"}),a&&i>0&&b&&p(r,{borderRadius:`${ce}px`,overflow:"hidden",transform:`scale(${$()}) translateY(calc(env(safe-area-inset-top) + 14px))`,transformOrigin:"top",transitionProperty:"transform, border-radius",transitionDuration:`${h.DURATION}s`,transitionTimingFunction:`cubic-bezier(${h.EASE.join(",")})`},!0)}function pe(r){var D;if(r.target.tagName==="BUTTON"||!d)return;C(!1),X.current=new Date;let i=c.current?Number.parseInt(getComputedStyle(c.current).getPropertyValue("--swipe-amount").slice(0,-2),10):null;if(!Q(r.target,!1)||!i||Number.isNaN(i)||y.current===null)return;let s=r.clientY,v=X.current.getTime()-y.current.getTime(),w=W.current-s,x=Math.abs(w)/v;if(w>0){ee(),l==null||l(r,!1);return}if(x>.4){Z(),l==null||l(r,!1);return}let L=Math.min(((D=c.current)==null?void 0:D.getBoundingClientRect().height)||0,window.innerHeight);if(i>=L*E){Z(),l==null||l(r,!1);return}l==null||l(r,!0),ee()}function ge(r){let i=document.querySelector("[vaul-drawer-wrapper]");!i||!a||(r.animationName==="show-dialog"?(p(document.body,{background:"black"},!0),p(i,{borderRadius:`${ce}px`,overflow:"hidden",transform:`scale(${$()}) translateY(calc(env(safe-area-inset-top) + 14px))`,transformOrigin:"top",transitionProperty:"transform, border-radius",transitionDuration:`${h.DURATION}s`,transitionTimingFunction:`cubic-bezier(${h.EASE.join(",")})`})):r.animationName==="hide-dialog"&&(K(i,"transform"),K(i,"borderRadius"),p(i,{transitionProperty:"transform, border-radius",transitionDuration:`${h.DURATION}s`,transitionTimingFunction:`cubic-bezier(${h.EASE.join(",")})`})))}function ve(r){let i=r?(window.innerWidth-16)/window.innerWidth:1,s=r?-16:0;window.clearTimeout(G.current),p(c.current,{transition:`transform ${h.DURATION}s cubic-bezier(${h.EASE.join(",")})`,transform:`scale(${i}) translateY(${s}px)`}),r||(G.current=setTimeout(()=>{p(c.current,{transition:"none",transform:"translateY(var(--swipe-amount))"})},500))}function we(r,i){if(i<0)return;let s=(window.innerWidth-16)/window.innerWidth,v=s+i*(1-s),w=-16+i*16;p(c.current,{transform:`scale(${v}) translateY(${w}px)`,transition:"none"})}function Te(r,i){let s=i?(window.innerWidth-16)/window.innerWidth:1,v=i?-16:0;i&&p(c.current,{transition:`transform ${h.DURATION}s cubic-bezier(${h.EASE.join(",")})`,transform:`scale(${s}) translateY(${v}px)`})}return f.createElement(g.Root,{open:b,onOpenChange:r=>{m(r)}},f.createElement(j.Provider,{value:{drawerRef:c,overlayRef:R,onAnimationStart:ge,onPress:fe,onRelease:pe,onDrag:me,dismissible:T,isOpen:b,onNestedDrag:we,onNestedOpenChange:ve,onNestedRelease:Te,keyboardIsOpen:I,setIsAnimating:U}},o))}var je=f.forwardRef(function({children:e,...t},n){let{overlayRef:o,onRelease:a}=A(),u=_(n,o);return f.createElement(g.Overlay,{onMouseUp:a,ref:u,"vaul-overlay":"",...t})}),ke=f.forwardRef(function({children:e,onOpenAutoFocus:t,onPointerDownOutside:n,onAnimationEnd:o,...a},u){let{drawerRef:l,onPress:E,onRelease:S,onAnimationStart:T,onDrag:b,dismissible:m,isOpen:d,keyboardIsOpen:C,setIsAnimating:M}=A(),U=_(u,l),R=f.useRef(null);return f.createElement(g.Content,{onAnimationStart:y=>{window.clearTimeout(R.current),M(!0),R.current=setTimeout(()=>{M(!1),o==null||o(d)},Ue),T(y)},onPointerDown:E,onPointerUp:S,onPointerMove:b,onOpenAutoFocus:y=>{t?t(y):y.preventDefault()},onPointerDownOutside:y=>{C.current&&(C.current=!1,p(l.current,{"--hide-to":"200%"})),m||y.preventDefault(),n==null||n(y)},ref:U,...a,"vaul-drawer":""},e)});function ze({children:e,onDrag:t,onOpenChange:n}){let{onNestedDrag:o,onNestedOpenChange:a,onNestedRelease:u}=A();if(!o)throw new Error("Drawer.NestedRoot must be placed in another drawer");return f.createElement(de,{onDrag:(l,E)=>{o(l,E),t==null||t(l,E)},onOpenChange:l=>{a(l),n==null||n(l)},onRelease:u},e)}var it=Object.assign({},{Root:de,NestedRoot:ze,Content:ke,Overlay:je,Trigger:g.Trigger,Portal:g.Portal,Close:g.Close,Title:g.Title,Description:g.Description});export{it as Drawer};
//# sourceMappingURL=index.mjs.map